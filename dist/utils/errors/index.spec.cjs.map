{"version":3,"sources":["/home/runner/work/ts-utilities/ts-utilities/dist/utils/errors/index.spec.cjs","../../../src/utils/errors/index.spec.ts"],"names":[],"mappings":"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","file":"/home/runner/work/ts-utilities/ts-utilities/dist/utils/errors/index.spec.cjs","sourcesContent":[null,"import { VError } from \"verror\"\nimport { describe, expect, it } from \"vitest\"\n\nimport { errors } from \"./index\"\n\ndescribe(\"errors\", () => {\n\tclass CustomError extends Error {\n\t\tconstructor(message: string) {\n\t\t\tsuper(message)\n\t\t\tthis.name = \"CustomError\"\n\t\t}\n\t}\n\n\tdescribe(\"find\", () => {\n\t\tit(\"should find error in simple cause chain\", () => {\n\t\t\tconst root = new CustomError(\"root\")\n\t\t\tconst err = new Error(\"wrapper\", { cause: root })\n\n\t\t\tconst found = errors.find(err, CustomError)\n\t\t\texpect(found).toBe(root)\n\t\t\texpect(found).toBeInstanceOf(CustomError)\n\t\t})\n\n\t\tit(\"should find error in VError chain\", () => {\n\t\t\tconst root = new CustomError(\"root\")\n\t\t\tconst err = new VError(root, \"wrapper\")\n\n\t\t\tconst found = errors.find(err, CustomError)\n\t\t\texpect(found).toBe(root)\n\t\t})\n\n\t\tit(\"should return undefined if not found\", () => {\n\t\t\tconst err = new Error(\"simple\")\n\t\t\tconst found = errors.find(err, CustomError)\n\t\t\texpect(found).toBeUndefined()\n\t\t})\n\t})\n\n\tdescribe(\"is\", () => {\n\t\tit(\"should return true if error matches type in chain\", () => {\n\t\t\tconst root = new CustomError(\"root\")\n\t\t\tconst err = new Error(\"wrapper\", { cause: root })\n\n\t\t\texpect(errors.is(err, CustomError)).toBe(true)\n\t\t})\n\n\t\tit(\"should return false if error not found in chain\", () => {\n\t\t\tconst err = new Error(\"simple\")\n\t\t\texpect(errors.is(err, CustomError)).toBe(false)\n\t\t})\n\t})\n\n\tdescribe(\"as\", () => {\n\t\tit(\"should return true and narrow type if direct instance\", () => {\n\t\t\tconst err = new CustomError(\"test\")\n\t\t\tif (errors.as(err, CustomError)) {\n\t\t\t\texpect(err.message).toBe(\"test\")\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"should be CustomError\")\n\t\t\t}\n\t\t})\n\n\t\tit(\"should return false if not direct instance\", () => {\n\t\t\tconst root = new CustomError(\"root\")\n\t\t\tconst err = new Error(\"wrapper\", { cause: root })\n\n\t\t\t// errors.as checks strictly `instanceof`, unlike errors.is/find which traverse causes\n\t\t\texpect(errors.as(err, CustomError)).toBe(false)\n\t\t})\n\t})\n\n\tdescribe(\"unwrap\", () => {\n\t\tit(\"should unwrap simple cause\", () => {\n\t\t\tconst root = new Error(\"root\")\n\t\t\tconst err = new Error(\"wrapper\", { cause: root })\n\n\t\t\texpect(errors.unwrap(err)).toBe(root)\n\t\t})\n\n\t\tit(\"should unwrap VError cause\", () => {\n\t\t\tconst root = new Error(\"root\")\n\t\t\tconst err = new VError(root, \"wrapper\")\n\n\t\t\texpect(errors.unwrap(err)).toBe(root)\n\t\t})\n\n\t\tit(\"should return undefined if no cause\", () => {\n\t\t\tconst err = new Error(\"simple\")\n\t\t\texpect(errors.unwrap(err)).toBeUndefined()\n\t\t})\n\t})\n\n\tdescribe(\"join\", () => {\n\t\tit(\"should join multiple errors into MultiError\", () => {\n\t\t\tconst err1 = new Error(\"one\")\n\t\t\tconst err2 = new Error(\"two\")\n\n\t\t\tconst joined = errors.join([err1, err2])\n\n\t\t\texpect(joined).toBeInstanceOf(VError.MultiError)\n\t\t\t// VError.MultiError usually exposes errors via a method or property, check if implementation wraps correctly\n\t\t\t// The implementation uses VError.errorFromList(errs)\n\t\t})\n\t})\n})\n"]}