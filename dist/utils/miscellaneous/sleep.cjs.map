{"version":3,"sources":["../../../src/utils/miscellaneous/sleep.ts"],"sourcesContent":["import { addAbortListener } from \"node:events\"\n\n/**\n * Sleep for a given number of milliseconds with cancellation support and memory-safe implementation.\n *\n * @param {number} ms time to sleep in milliseconds\n * @param {?AbortSignal} [signal] optional abort signal to cancel the sleep\n */\nexport const sleep = (ms: number, signal?: AbortSignal): Promise<void> => {\n\tif (signal?.aborted) {\n\t\treturn Promise.resolve()\n\t}\n\treturn new Promise<void>((resolve) => {\n\t\tconst timer = setTimeout(resolve, ms)\n\t\tif (signal) {\n\t\t\tconst disposable = addAbortListener(signal, () => {\n\t\t\t\tclearTimeout(timer)\n\t\t\t\tdisposable[Symbol.dispose]()\n\t\t\t\tresolve()\n\t\t\t})\n\t\t}\n\t})\n}\n\n/**\n * Sleep for a given number of milliseconds with cancellation support and memory-safe implementation.\n *\n * @param {number} ms time to sleep in milliseconds\n * @param {?AbortSignal} [signal] optional abort signal to cancel the sleep\n */\nexport const delay = sleep\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAiC;AAQ1B,MAAM,QAAQ,CAAC,IAAY,WAAwC;AACzE,MAAI,QAAQ,SAAS;AACpB,WAAO,QAAQ,QAAQ;AAAA,EACxB;AACA,SAAO,IAAI,QAAc,CAAC,YAAY;AACrC,UAAM,QAAQ,WAAW,SAAS,EAAE;AACpC,QAAI,QAAQ;AACX,YAAM,iBAAa,qCAAiB,QAAQ,MAAM;AACjD,qBAAa,KAAK;AAClB,mBAAW,OAAO,OAAO,EAAE;AAC3B,gBAAQ;AAAA,MACT,CAAC;AAAA,IACF;AAAA,EACD,CAAC;AACF;AAQO,MAAM,QAAQ;","names":[]}